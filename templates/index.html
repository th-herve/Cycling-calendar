{% extends "template.html" %}

{% block title %}
    main
{% endblock %}

{% block main %}
<div id="calendar"></div>

  <script>

      let calendarEl = document.getElementById("calendar");

      let calendar = new FullCalendar.Calendar(calendarEl, {
        events: [
          {% for event in events %}
            {
            id: "{{ event.id }}",
            title : "{{ event.title | safe }}",
            start : "{{ event.date }}",
            backgroundColor : "{{ event.backgroundColor }}"
            },
          
          {% if event.stages %}
            {% for stage in event.stages %}
            {
              id: "{{ stage.id }}",
              title : "{{ stage.title | safe }}",
              start : "{{ stage.date }}",
            }, 
            {% endfor %}
            
          {% endif %}

          {% endfor %}
          ]
        });
      

      calendar.render();
  </script>

{% endblock %}
